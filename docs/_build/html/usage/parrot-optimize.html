

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>parrot-optimize &mdash; parrot  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="parrot-predict" href="parrot-predict.html" />
    <link rel="prev" title="parrot-train" href="parrot-train.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> parrot
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started with PARROT</a></li>
<li class="toctree-l1"><a class="reference internal" href="parrot-train.html">parrot-train</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">parrot-optimize</a></li>
<li class="toctree-l1"><a class="reference internal" href="parrot-predict.html">parrot-predict</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Module Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ml_faqs.html">Machine Learning Resources:</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">parrot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>parrot-optimize</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/usage/parrot-optimize.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parrot-optimize">
<h1>parrot-optimize<a class="headerlink" href="#parrot-optimize" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">parrot-optimize</span></code> is a command for performing hyperparameter optimization on a given dataset. The dataset is divided 5-fold and iteratively retrained and validated using cross validation to estimate the performance of the network using a given set of hyperparameters. Bayesian optimization ensures that in each iteration, hyperparameters are selected that better sample hyperparameter space and/or are expected to improve performance. After 80 iterations, the algorithm will return the best-performing hyperparameters and a new network will be trained on the cumulative cross-validation data, then tested on held out test data. The final trained BRNN will be saved to disk along with a plot that provides a performance estimate.</p>
<p>Once PARROT is installed, the user can run <code class="docutils literal notranslate"><span class="pre">parrot-optimize</span></code> from the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ parrot-optimize data_file output_network &lt;flags&gt;
</pre></div>
</div>
<p>Where <cite>data_file</cite> specifies the path to the whitespace-separated datafile and <cite>output_network</cite> is the path to where the final trained network will be saved on disk. Of note, the output images from this script will be saved to the same directory as <cite>output_network</cite>.</p>
<p><strong>Required flags:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--datatype</span></code> / <code class="docutils literal notranslate"><span class="pre">-d</span></code> : Describes how values are formatted in <cite>datafile</cite>. Should be ‘sequence’ if there is a single value per sequence, or ‘residues’ if there are values for every residue in each sequence. See the example datasets in the <strong>data</strong> folder for more information.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--classes</span></code> / <code class="docutils literal notranslate"><span class="pre">-c</span></code> : The number of classes for the machine learning task. If the task is regression, then specify ‘1’.</p></li>
</ul>
</div></blockquote>
<p><strong>Optional flags:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--help</span></code> / <code class="docutils literal notranslate"><span class="pre">-h</span></code> : Display a help message.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--batch</span></code> / <code class="docutils literal notranslate"><span class="pre">-b</span></code> : Training batch size (default is 32). Must be a positive integer, and ideally should be in the range of 50-500. Powers of 2 (64, 128, 256, etc.) are optimized for slightly faster performance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--epochs</span></code> / <code class="docutils literal notranslate"><span class="pre">-e</span></code> : Number of epochs to train for during each iteration of optimization on each data fold (default is 200).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--split</span></code> : Path to split_file for manually dividing dataset into training, validation and test sets. The file should contain three lines, corresponding to training, validation and test sets respectively. Each line should have integers separated by whitespace, with the integers specify which sequences/lines in the <cite>datafile</cite> (0-indexed) will belong to which dataset. The cross-validation folds will be divided from the training and validation data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--setFractions</span></code> : Include this flag to manually set the proportions of the data belonging to the training, validation and test sets. This option must be followed by three floats (representing train, validation, and test) between 0 and 1 that cumulatively sum to 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--encode</span></code> : Include this flag to specify the numeric encoding scheme for each amino acid. Available options are ‘onehot’ (default), ‘biophysics’ or user-specified. If you wish to manually specify an encoding scheme, provide a path to a text file describing the amino acid to vector mapping.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--excludeSeqID</span></code> : Include this flag if the <cite>data_file</cite> is formatted such that it does not have sequence IDs as the first column in each row.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--forceCPU</span></code> : Include this flag to force network training on the CPU, even if a GPU is available. Use if your machine has a GPU, but the GPU has insufficient memory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--verbose</span></code> / <code class="docutils literal notranslate"><span class="pre">-v</span></code> : The level of information that should be printed to console during training. There will be no output if this flag is not included, and maximum output if this flag is included twice or more.</p></li>
</ul>
</div></blockquote>
<p><strong>Output:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">parrot-optimize</span></code> will produce similar output as <code class="docutils literal notranslate"><span class="pre">parrot-train</span></code>. Firstly, the saved network weights from the training process will be located at the path provided by <cite>output_network</cite>. Additionally, there will be two PNG images saved to this same directory. The first, called ‘train_test.png’ displays the network’s performance on the training and validation sets over the course of training. The second image describes the network performance on the held out test set, and will vary depending on the data format and machine learning task. If training a network for a classification task, the image will be a confusion matrix. If training for a regression task, the image will be a scatterplot comparing the predicted and true values of the test set sequences. Finally, the file “test_set_predictions.tsv” will be saved into this same directory. This file contains both the true values (provided in the original data_file) and predicted values for each of the sequences within the test set.</p>
<p>Output text detailing network performance across training can be printed to console if the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> flag is provided.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="parrot-predict.html" class="btn btn-neutral float-right" title="parrot-predict" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="parrot-train.html" class="btn btn-neutral float-left" title="parrot-train" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Holehouse Lab. Project structure based on the Computational Molecular Science Python Cookiecutter version 1.3

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>